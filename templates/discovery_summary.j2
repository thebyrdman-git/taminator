# Dynamic Customer Discovery Summary

**Generated:** {{ ansible_date_time.iso8601 }}  
**Discovery Method:** Dynamic Inventory Plugin  
**Total Customers Discovered:** {{ groups['all_customers'] | length }}  

## üìä Discovery Overview

- **SBR Groups Filtered:** {{ rfe_discovery_metadata.sbr_groups_filtered | join(', ') }}
- **Total Cases Processed:** {{ rfe_discovery_metadata.total_cases_processed }}
- **Minimum Cases Threshold:** {{ rfe_discovery_metadata.min_cases_threshold }}
- **Include Closed Cases:** {{ rfe_discovery_metadata.include_closed }}

## üè¢ Discovered Customers

{% for customer in groups['all_customers'] %}
### {{ hostvars[customer].customer_name }}

- **Account Name:** {{ hostvars[customer].account_name }}
- **Account Number:** {{ hostvars[customer].account_number }}
- **Vertical:** {{ hostvars[customer].vertical }}
- **SBR Groups:** {{ hostvars[customer].sbr_groups | join(', ') }}
- **Total Cases:** {{ hostvars[customer].total_cases }}
- **Active Cases:** {{ hostvars[customer].active_cases }}
- **Closed Cases:** {{ hostvars[customer].closed_cases }}
- **Case Types:** {{ hostvars[customer].case_types | join(', ') }}
- **Golden Ticket:** {{ 'Yes' if hostvars[customer].has_golden_ticket else 'No' }}
- **Secure Support:** {{ 'Yes' if hostvars[customer].secure_support else 'No' }}

{% endfor %}

## üìà Statistics by Vertical

{% set verticals = {} %}
{% for customer in groups['all_customers'] %}
  {% set vertical = hostvars[customer].vertical %}
  {% if vertical not in verticals %}
    {% set _ = verticals.update({vertical: {'count': 0, 'total_cases': 0, 'active_cases': 0}}) %}
  {% endif %}
  {% set _ = verticals[vertical].update({
    'count': verticals[vertical].count + 1,
    'total_cases': verticals[vertical].total_cases + hostvars[customer].total_cases,
    'active_cases': verticals[vertical].active_cases + hostvars[customer].active_cases
  }) %}
{% endfor %}

{% for vertical, stats in verticals.items() %}
### {{ vertical }}
- **Customers:** {{ stats.count }}
- **Total Cases:** {{ stats.total_cases }}
- **Active Cases:** {{ stats.active_cases }}

{% endfor %}

## üéØ SBR Group Distribution

{% set sbr_stats = {} %}
{% for customer in groups['all_customers'] %}
  {% for sbr_group in hostvars[customer].sbr_groups %}
    {% if sbr_group not in sbr_stats %}
      {% set _ = sbr_stats.update({sbr_group: {'customers': [], 'total_cases': 0}}) %}
    {% endif %}
    {% set _ = sbr_stats[sbr_group].customers.append(customer) %}
    {% set _ = sbr_stats[sbr_group].update({
      'total_cases': sbr_stats[sbr_group].total_cases + hostvars[customer].total_cases
    }) %}
  {% endfor %}
{% endfor %}

{% for sbr_group, stats in sbr_stats.items() %}
### {{ sbr_group }}
- **Customers:** {{ stats.customers | length }}
- **Total Cases:** {{ stats.total_cases }}

{% endfor %}

## üöÄ Next Steps

1. **Review Reports:** Check the generated reports in the `output/` directory
2. **Customize Configurations:** Modify customer-specific settings as needed
3. **Schedule Automation:** Set up regular report generation
4. **Monitor Changes:** Track customer case volume and trends

---

*This summary was automatically generated by the RFE Automation Dynamic Discovery System.*  
*For questions or issues, please contact your TAM or the TAM Operations team.*
